### 1、平衡二叉树

平衡二叉树（AVL树）的作用就是查找，AVL树的查找、插入和删除在平均和最坏情况下都是`O(logn)`。AVL树的效率就是高在这个地方。如果在AVL树中插入或删除节点后，使得高度之差大于1。此时，AVL树的平衡状态就被破坏，需要对其进行旋转处理，因此创建一颗平衡二叉树的成本比较高。此时就出现了红黑树



### 2、红黑树

1、红黑树是一种自平衡的二叉查找树，**它可在 `O(logN) `时间内完成查找、增加、删除等操作**。

二叉搜索树，在极端情况下会退化为一个链表，此时查询的时间复杂度就是`O(n)`。红黑树是具备了某些特性的二叉搜索树，能解决非平衡树问题，红黑树是一种接近平衡的二叉树，接近平衡是因为它并没有像AVL树平衡因子的概念，它只是靠着满足红黑节点的5条性质来维持一种接近平衡的结构，进而提升整体的性能，并没有严格的卡定某个平衡因子来维持绝对平衡

2、红黑树是一个二叉搜索树，它在每个节点增加了一个存储位记录节点的颜色，可以是RED，也可以是BLACK。通过任意一条从根到叶子简单路径上颜色的约束，红黑树保证最长路径不超过最短路径的二倍，因而近似平衡（最短路径就是全黑节点，最长路径就是一个红节点一个黑节点，当从根节点到叶子节点的路径上黑色节点相同时，最长路径刚好是最短路径的两倍）。同时满足以下特性，这五条性质保证红黑树等价于四阶B树

1. 节点是红色或黑色
2. 根是黑色
3. 叶子节点（外部节点，空节点）都是黑色，这里的叶子节点指的是最底层的空节点（外部节点），下图中的那些null节点才是叶子节点，null节点的父节点在红黑树里不将其看作叶子节点
4. 从根节点到叶子节点的所有路径上不能有 2 个连续的红色节点
5. 从任一节点到叶子节点的所有路径都包含相同数目的黑色节点

![img](https://i-blog.csdnimg.cn/blog_migrate/5f90bd60ae3a399dceb7f9d4031f1303.png)



左旋：将节点旋转为其右孩子的左孩子

右旋：将节点旋转为其左孩子的右孩子

![](https://cdn.jsdelivr.net/gh/xrj123123/Images/202410101751668.jpg)



插入节点时，这个节点的颜色为红色，这样可以满足红黑树的1,2,3,5四条性质。如果是添加根节点，则将节点设定为黑色





### 3、红黑树和AVL树

|        | 查找    | 插入                       | 删除                        | 平衡标准                        | 试用场景 |
| ------ | ------- | -------------------------- | --------------------------- | ------------------------------- | -------- |
| 红黑树 | O(logn) | O(logn)，O(1) 次的旋转操作 | O(logn)，O(1) 次的旋转操作  | 没有一条路径会大于其他路径的2倍 | 写多读少 |
| AVL树  | O(logn) | O(logn)，O(1) 次旋转操作   | O(logn)，最多O(logn) 次旋转 | 每个左右子树的高度差不超过1     | 读多写少 |

